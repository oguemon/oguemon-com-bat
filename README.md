# おぐえもん.comのバッチ/APIプログラム

おぐえもん.comの裏側で動くプログラム類です。

## 概要

- おぐえもん.comの人気記事ランキングを取得します。

## ディレクトリ構成

- `bot`内にはCRONで実行されることを前提としたバッチプログラムが入っています。
- `api`内にはAPIリクエストのレスポンスを行うプログラムが入っています。

## 使い方

1. `なんとか.sample.拡張子`のファイル名から`.sample`を除いて、中身に適当な値を設定する。
1. `bot`ディレクトリ内で`compose install`する。
1. `bot`と`api`をサーバー上の適当なディレクトリに配置する。
    - `bot`は公開部分でなくてOK。`api`は公開部分である必要あり。
1. `bot/entry.php`を実行するCRONを適宜設定する。

## 注意事項

サイトマップデータはnext.jsのビルド時に生成したものを使用します。そのためこのコードベース上には現れません。

次のような形式をしています。

```json
{
  "/blog/example/": {
    "title": "記事タイトル",
    "link": "blog/example",
    "date": "2024-03-01 06:00:00",
    "modified": "2024-03-01 12:00:00",
    "thumbnail": "/path/example-thumbnail.png"
  },
  // こんな感じのが記事の数だけ続く...
}
```
